generator client {
  provider = "prisma-client-py"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model embedding {
  vector   Unsupported("vector(768)")
  image_id Int                         @id
  image    image                       @relation(fields: [image_id], references: [image_id], onDelete: Cascade, map: "Embedding_image_id_fkey")
}

model image {
  image_id     Int        @id @default(autoincrement())
  original_url String     @db.Text
  like_cnt     Int        @default(0)
  width        Int
  height       Int
  src_url      String     @db.Text
  caption      String     @db.Text
  cloud_url    String     @db.Text
  embedding    embedding?
  imagetag     imagetag[]
}

model imagetag {
  image_id Int
  tag_id   Int
  image    image @relation(fields: [image_id], references: [image_id], onDelete: Cascade, map: "ImageTag_image_id_fkey")
  tag      tag   @relation(fields: [tag_id], references: [tag_id], map: "ImageTag_tag_id_fkey")

  @@id([image_id, tag_id])
  @@index([tag_id], map: "ImageTag_tag_id_fkey")
}

model tag {
  tag_id   Int        @id @default(autoincrement())
  tag_name String     @unique(map: "Tag_tag_name_key")
  imagetag imagetag[]
}
